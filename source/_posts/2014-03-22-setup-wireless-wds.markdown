---
layout: post
title: "架设无线桥接网络（WDS）"
date: 2014-03-22 19:54
comments: true
categories: network
---

现在的无线路由器动辄3根天线，号称穿墙能力如何如何，信号可以从一楼一直覆盖到三楼。但是根据我几年来使用了N款无线路由器之后，发现都是扯。我现在使用的是一台ASUS的，3根天线，128M内存的无线路由器，支持刷第三方固件（如DD-WRT, Tomato），但是穿墙效果还是无法让人满意。路由器放在房间，客厅的信号就是时有时无。当然，我指的是使用ipad或者手机时，信号较弱，如果使用笔记本电脑要好一些。

忍受了2年之后，我决定在客厅再放一个无线路由器，做无线桥接（WDS）使用，彻底摆脱信号之苦。

<!-- more -->

简单说下两台路由器：

1. 做AP用的，也是连接着Internet的，就是那台ASUS的，放在书房。

2. 做桥接用的，放在客厅的，是一台特价的时候买的四十块钱的Tenda（腾达）的无线路由器。

其实网上介绍WDS的文章很多，但是很多文章都不适用于我的情况，所以做了很多次测试。

最后配置完成之后，发现其实非常简单：

## 主路由器（做AP用的ASUS的那台）的配置 ##

由于我这台ASUS的路由器给我刷了Tomato的固件，所以这里是Tomato中的配置方法。按照下图配置即可：

![Tomato AP+WDS 配置](/downloads/image/tomato-ap-wds.png)

- 工作模式设置成 `AP + WDS`
- 通道尽量选择一个没人使用的。现在每家每户都有无线路由器，所以常见通道很多人都在使用，挑一个没人使用的比较好
- 无线加密还是按照以前的就好，现在基本上用的都是 `WPA2 Personal` 了
- WDS一项中，你可以将辅路由器的MAC地址填写进去，也可以像上面的图中所示，选成AUTO

## 辅路由器（做桥接用的Tenda的那台）的配置 ##

忘记截图了，但是只需要确保以下几点即可：

- Internet连接要关闭，因为是做桥接用。没有关闭就设成有线网络连接Internet，反正我们不会插网线上去，所以等于禁用了
- LAN的网段不要设成跟主路由器一个网段，以免冲突。比如主路由器是192.168.1.x, 辅路由器就可以设成192.168.2.x
- 关闭DHCP，因为所有的WIFI数据会被发送到主路由器去
- 工作模式设成WDS，然后填写主路由器的无线MAC地址。一般的路由器都会有一个Scan按钮，可以给出所有的无线网络，选择主路由器那个即可
- 无线加密设置成跟主路由器一样（加密方法、密钥），这很重要

我这个Tenda的路由器，设成WDS模式之后，无线的SSID就会自动设置成跟主路由器一样。所以，当做完上面的设置之后，家里就只有一个无线信号，走到书房就自动连接到主路由器，走到客厅就会自动连接到辅路由器，Cool。

Have a good day!
